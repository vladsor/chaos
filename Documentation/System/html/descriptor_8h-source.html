<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-
1">
<title>API documentation for System enviroment</title>
<style type="text/css">

BODY { background-color: #e0e0ff; }
H1 { text-align: center; }
CAPTION { font-weight: bold }
A { color: #000066; text-decoration: none; font-weight: bold; }
A.qindex {}
A.qindexRef {}
A.el { text-decoration: none; font-weight: bold }
A.elRef { font-weight: bold }
A.code { text-decoration: none; font-weight: normal; color: #4444ee }
A.codeRef { font-weight: normal; color: #4444ee }
A:hover { text-decoration: underline; background-color: #f2f2ff }
A:visited { color: #000066; }
DL.el { margin-left: -1cm }
DIV.fragment { width: 100%; border: none; background-color: #eeeeee }
DIV.ah { background-color: black; font-weight: bold; color: #ffffff; margin-bottom: 3px; margin-top: 3px }
TD.md { background-color: #f2f2ff; font-weight: bold; }
TD.mdname1 { background-color: #f2f2ff; font-weight: bold; color: #602020; }
TD.mdname { background-color: #f2f2ff; font-weight: bold; color: #602020; width: 600px; }
DIV.groupHeader { margin-left: 16px; margin-top: 12px; margin-bottom: 6px; font-weight: bold }
DIV.groupText { margin-left: 16px; font-style: italic; font-size: smaller }
TR, TD, TABLE { padding: 0 0 0 0; margin: 0 0 0 0; }
TD.indexkey { 
   background-color: #d0d0ff; 
   font-weight: bold; 
   padding-right  : 10px; 
   padding-top    : 2px; 
   padding-left   : 10px; 
   padding-bottom : 2px; 
   margin-left    : 0px; 
   margin-right   : 0px; 
   margin-top     : 0px; 
   margin-bottom  : 0px  
}
TD.indexvalue { 
   background-color: #d0d0ff; 
   font-style: italic; 
   padding-right  : 10px; 
   padding-top    : 2px; 
   padding-left   : 10px; 
   padding-bottom : 2px; 
   margin-left    : 0px; 
   margin-right   : 0px; 
   margin-top     : 0px; 
   margin-bottom  : 0px  
}
span.keyword       { color: #008000 }
span.keywordtype   { color: #604020 }
span.keywordflow   { color: #e08000 }
span.comment       { color: #800000 }
span.preprocessor  { color: #806020 }
span.stringliteral { color: #002080 }
span.charliteral   { color: #008080 }

BODY, TD { font-family: tahoma, verdana, arial, sansserif; font-size: 11px; }

</style>
</head><body>
<center><a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="functions.html">Data Structure Members List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; </center>


<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>descriptor.h</h1><a href="descriptor_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/* $chaos: descriptor.h,v 1.6 2002/10/14 21:29:50 per Exp $ */</span>
00002 
00012 <span class="comment">/* Copyright 2002 chaos development. */</span>
00013 <span class="comment">/* Use freely under the terms listed in the file LICENSE. */</span>
00014 
00029 <span class="preprocessor">#ifndef __SYSTEM_ENVIROMENT_IA32__DESCRIPTOR_H__</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#define __SYSTEM_ENVIROMENT_IA32__DESCRIPTOR_H__</span>
00031 <span class="preprocessor"></span>
<a name="l00035"></a><a class="code" href="group__group__segmentation__descriptors.html#ga15">00035</a> <span class="keyword">enum</span> <a class="code" href="group__group__segmentation__descriptors.html#ga15">privilege_level_t</a>
00036 { 
00037     PRIVILEGE_LEVEL_KERNEL,
00038     PRIVILEGE_LEVEL_SYSTEM1,
00039     PRIVILEGE_LEVEL_SYSTEM2,
00040     PRIVILEGE_LEVEL_USER,
00041 };
00042 
00043 <span class="preprocessor">#define SEGMENT_PRESENT           0x80</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#define SEGMENT_NOT_PRESENT       0</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#define SEGMENT_SIZE_MAX          0xFFFFFF</span>
00046 <span class="preprocessor"></span><span class="preprocessor">#define SEGMENT_DIGIT_16          0</span>
00047 <span class="preprocessor"></span><span class="preprocessor">#define SEGMENT_DIGIT_32          0x40</span>
00048 <span class="preprocessor"></span><span class="preprocessor">#define SEGMENT_GRANULARITY_BYTE  0</span>
00049 <span class="preprocessor"></span><span class="preprocessor">#define SEGMENT_GRANULARITY_PAGE  0x80</span>
00050 <span class="preprocessor"></span>
<a name="l00054"></a><a class="code" href="group__group__segmentation__descriptors.html#ga16">00054</a> <span class="keyword">enum</span> <a class="code" href="group__group__segmentation__descriptors.html#ga16">descriptor_type_t</a>
00055 {
00059     <a class="code" href="group__group__segmentation__descriptors.html#gga16a19">DESCRIPTOR_TYPE_TASK_GATE_32</a> = 5,
00060 
00064     <a class="code" href="group__group__segmentation__descriptors.html#gga16a20">DESCRIPTOR_TYPE_TSS</a> = 9,
00065 
00069     <a class="code" href="group__group__segmentation__descriptors.html#gga16a21">DESCRIPTOR_TYPE_CALL_GATE</a> = 12,
00070 
00074     <a class="code" href="group__group__segmentation__descriptors.html#gga16a22">DESCRIPTOR_TYPE_INTERRUPT_GATE_32</a> = 14,
00075 
00079     <a class="code" href="group__group__segmentation__descriptors.html#gga16a23">DESCRIPTOR_TYPE_TRAP_GATE_32</a> = 15,
00080 };
00081 
<a name="l00085"></a><a class="code" href="group__group__segmentation__descriptors.html#ga7">00085</a> <span class="preprocessor">#define DESCRIPTOR_NULL 0ULL</span>
00086 <span class="preprocessor"></span>
<a name="l00090"></a><a class="code" href="group__group__segmentation__descriptors.html#ga8">00090</a> <span class="preprocessor">#define DESCRIPTOR_CODE(base,limit,granularity,dpl,present,digit) (            \</span>
00091 <span class="preprocessor">    (BITS_GET_LOW((limit),15)) |                                               \</span>
00092 <span class="preprocessor">    (((uint64_t)BITS_GET_LOW((base),23)) &lt;&lt; 16) |                              \</span>
00093 <span class="preprocessor">    ((((uint64_t) ((present) | 0x18 | ((dpl) &lt;&lt; 5)))) &lt;&lt; 40) |                 \</span>
00094 <span class="preprocessor">    ((((uint64_t) (BITS_GET((limit),19,16) | (digit) | (granularity)))) &lt;&lt; 48) | \</span>
00095 <span class="preprocessor">    ((((uint64_t) BITS_GET(base,31,24))) &lt;&lt; 56))</span>
00096 <span class="preprocessor"></span>
00097 <span class="preprocessor">#define DESCRIPTOR_DATA(base,limit,granularity,dpl,present,digit) (            \</span>
00098 <span class="preprocessor">    (BITS_GET_LOW((limit),15)) |                                               \</span>
00099 <span class="preprocessor">    (((uint64_t)BITS_GET_LOW((base),23)) &lt;&lt; 16) |                              \</span>
00100 <span class="preprocessor">    ((((uint64_t) ((present) | 0x12 | ((dpl) &lt;&lt; 5)))) &lt;&lt; 40) |                 \</span>
00101 <span class="preprocessor">    ((((uint64_t) (BITS_GET((limit),19,16) | (digit) | (granularity)))) &lt;&lt; 48) | \</span>
00102 <span class="preprocessor">    ((((uint64_t) BITS_GET(base,31,24))) &lt;&lt; 56))</span>
00103 <span class="preprocessor"></span>
00104 <span class="preprocessor">#define DESCRIPTOR_STACK(base,limit,granularity,dpl,present,digit) (           \</span>
00105 <span class="preprocessor">  (BITS_GET_LOW((limit),15)) |                                                 \</span>
00106 <span class="preprocessor">  (((uint64_t)BITS_GET_LOW((base),23)) &lt;&lt; 16) |                                \</span>
00107 <span class="preprocessor">  ((((uint64_t) ((present) | 0x16 | ((dpl) &lt;&lt; 5)))) &lt;&lt; 40) |                   \</span>
00108 <span class="preprocessor">  ((((uint64_t) (BITS_GET((limit),19,16) | (digit) | (granularity)))) &lt;&lt; 48) | \</span>
00109 <span class="preprocessor">  ((((uint64_t) BITS_GET(base,31,24))) &lt;&lt; 56))</span>
00110 <span class="preprocessor"></span>
00111 <span class="preprocessor">#define DESCRIPTOR_TSS(address,size,granularity,dpl,present,digit) (           \</span>
00112 <span class="preprocessor">  (BITS_GET_LOW((size),15)) |                                                  \</span>
00113 <span class="preprocessor">  (((uint64_t)BITS_GET_LOW((address),23)) &lt;&lt; 16) |                             \</span>
00114 <span class="preprocessor">  ((((uint64_t) ((present) | DESCRIPTOR_TYPE_TSS | ((dpl) &lt;&lt; 5)))) &lt;&lt; 40) |    \</span>
00115 <span class="preprocessor">  ((((uint64_t) (BITS_GET((size),19,16) | (digit) | (granularity)))) &lt;&lt; 48) |  \</span>
00116 <span class="preprocessor">  ((((uint64_t) BITS_GET(address,31,24))) &lt;&lt; 56))</span>
00117 <span class="preprocessor"></span>
00118 <span class="preprocessor">#define DESCRIPTOR_CALL_GATE(selector,address,dpl,params,present) (            \</span>
00119 <span class="preprocessor">  (BITS_GET_LOW((address),15)) |                                               \</span>
00120 <span class="preprocessor">  (((uint64_t) (selector)) &lt;&lt; 16) |                                            \</span>
00121 <span class="preprocessor">  (((uint64_t) (params)) &lt;&lt; 32) |                                              \</span>
00122 <span class="preprocessor">  ((((uint64_t) ((present) | 12 | ((dpl) &lt;&lt; 5)))) &lt;&lt; 40) |                     \</span>
00123 <span class="preprocessor">  ((((uint64_t) BITS_GET(address,31,16))) &lt;&lt; 48))</span>
00124 <span class="preprocessor"></span>
00125 <span class="preprocessor">#define DESCRIPTOR_INTERRUPT_GATE(selector,address,dpl,present) (              \</span>
00126 <span class="preprocessor">  (BITS_GET_LOW((address),15)) |                                               \</span>
00127 <span class="preprocessor">  (((uint64_t) (selector)) &lt;&lt; 16) |                                            \</span>
00128 <span class="preprocessor">  ((((uint64_t) ((present) | 14 | ((dpl) &lt;&lt; 5)))) &lt;&lt; 40) |                     \</span>
00129 <span class="preprocessor">  ((((uint64_t) BITS_GET(address,31,16))) &lt;&lt; 48))</span>
00130 <span class="preprocessor"></span>
00131 <span class="preprocessor">#define DESCRIPTOR_TRAP_GATE(selector,address,dpl,present) (                   \</span>
00132 <span class="preprocessor">  (BITS_GET_LOW((address),15)) |                                               \</span>
00133 <span class="preprocessor">  (((uint64_t) (selector)) &lt;&lt; 16) |                                            \</span>
00134 <span class="preprocessor">  ((((uint64_t) ((present) | 15 | ((dpl) &lt;&lt; 5)))) &lt;&lt; 40) |                     \</span>
00135 <span class="preprocessor">  ((((uint64_t) BITS_GET(address,31,16))) &lt;&lt; 48))</span>
00136 <span class="preprocessor"></span>
<a name="l00140"></a><a class="code" href="structdescriptor__t.html">00140</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
00141 <span class="keyword"></span>{
<a name="l00145"></a><a class="code" href="structdescriptor__t.html#o0">00145</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a67">uint16_t</a> limit_lo;
00146 
<a name="l00150"></a><a class="code" href="structdescriptor__t.html#o1">00150</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a67">uint16_t</a> base_lo;
00151 
<a name="l00155"></a><a class="code" href="structdescriptor__t.html#o2">00155</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a> base_hi;
00156 
<a name="l00170"></a><a class="code" href="structdescriptor__t.html#o3">00170</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             type : 4;
00171 
<a name="l00178"></a><a class="code" href="structdescriptor__t.html#o4">00178</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             descriptor_type : 1;
00179 
<a name="l00190"></a><a class="code" href="structdescriptor__t.html#o5">00190</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             dpl : 2;
00191 
<a name="l00206"></a><a class="code" href="structdescriptor__t.html#o6">00206</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             segment_present : 1;
00207 
<a name="l00211"></a><a class="code" href="structdescriptor__t.html#o7">00211</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             limit_hi : 4;
00212 
<a name="l00217"></a><a class="code" href="structdescriptor__t.html#o8">00217</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             available : 1;
00218 
<a name="l00222"></a><a class="code" href="structdescriptor__t.html#o9">00222</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             zero : 1;
00223 
<a name="l00262"></a><a class="code" href="structdescriptor__t.html#o10">00262</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             default_operation_size : 1;
00263 
<a name="l00276"></a><a class="code" href="structdescriptor__t.html#o11">00276</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             granularity : 1;
00277 
<a name="l00281"></a><a class="code" href="structdescriptor__t.html#o12">00281</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             base_hi2;
00282 } <a class="code" href="structdescriptor__t.html">descriptor_t</a> <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/defines_8h.html#a11">PACKED</a>;
00283 
<a name="l00287"></a><a class="code" href="structgate__descriptor__t.html">00287</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
00288 <span class="keyword"></span>{
<a name="l00292"></a><a class="code" href="structgate__descriptor__t.html#o0">00292</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a67">uint16_t</a>            offset_lo;
00293     
<a name="l00297"></a><a class="code" href="structgate__descriptor__t.html#o1">00297</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a67">uint16_t</a>            segment_selector;
00298 
<a name="l00302"></a><a class="code" href="structgate__descriptor__t.html#o2">00302</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             params : 5;
00303 
00304     <span class="comment">/*</span>
00305 <span class="comment">     * @brief           Zero </span>
00306 <span class="comment">     */</span>
00307     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             zero : 3;
00308     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             type : 5;                 
00309 
<a name="l00313"></a><a class="code" href="structgate__descriptor__t.html#o5">00313</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             dpl : 2;
00314 
<a name="l00318"></a><a class="code" href="structgate__descriptor__t.html#o6">00318</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a66">uint8_t</a>             present : 1;
00319 
<a name="l00323"></a><a class="code" href="structgate__descriptor__t.html#o7">00323</a>     <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/stdint_8h.html#a67">uint16_t</a>            offset_hi;
00324 } <a class="code" href="structgate__descriptor__t.html">gate_descriptor_t</a> <a class="codeRef" doxygen="common.tag:/root/Chaos/Documentation/Common/html/" href="/root/Chaos/Documentation/Common/html/defines_8h.html#a11">PACKED</a>;
00325 
00326 <span class="preprocessor">#endif </span><span class="comment">/* !__SYSTEM_ENVIROMENT_IA32__DESCRIPTOR_H__ */</span>
00327 
</div></pre>  </body>
</html>
