TARGET="floppy"
BUILD=Release
FORMAT=Dynamic

SOURCES_ROOT=$CHAOS_SOURCES/Modules/Block/Floppy

SOURCES=$SOURCES_ROOT $SOURCES_ROOT/Interface

OBJECTS=$CHAOS_OBJECTS/$BUILD/$FORMAT/Modules
BINARIES=$CHAOS_BINARIES/$BUILD/$FORMAT/Modules

-D__STORM__
_D__STORM_MODULE__

mkdir -p $OBJECTS
mkdir -p $BINARIES

make deps \
    preprocessor_flags="" \
    include_directories="$CHAOS_INCLUDES"\
    source_directories="$SOURCES" \
    destination_directory="$BINARIES" \
    --directory="$OBJECTS" \
    --makefile="$SOURCES_ROOT/Makefile"


make \
    compile_flags="-O3 -funroll-loops -fomit-frame-pointer" \
    preprocessor_flags="" \
    include_directories="$CHAOS_INCLUDES"\
    library_directories="$CHAOS_LIBRARIES" \
    source_directories="$SOURCES" \
    destination_directory="$BINARIES" \
    target_name="$TARGET"\
    --directory="$OBJECTS" \
    --makefile="$SOURCES_ROOT/Makefile"

